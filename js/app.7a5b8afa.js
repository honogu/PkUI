(function(){"use strict";var n={45:function(n,e,i){var t=i(2549),a=i(7088);const o=(0,a.iH)();function r(n){return o.value=n,{apiUrl:o}}function l(){return{apiUrl:o}}var u=i(8884),s=i(8254);const c=(0,a.iH)(),m=(0,a.iH)();function p(){const{apiUrl:n}=l(),e=async()=>{const e=await fetch(n.value+"firms"),i=await e.json();return i||[]},i=async()=>{c.value=await e()},t=async e=>{const i=await fetch(n.value+"firms/"+e),t=await i.json();t&&(m.value=t)},a=async e=>{const t=new FormData;t.append("Name",e.name),t.append("Image",e.image),t.append("EnglishDescription",e.englishDescription),t.append("EstonianDescription",e.estonianDescription);const a=await fetch(n.value+"firms",{method:"POST",body:t}),o=await a.json();if(o){if(200!=a.status)return void 0==o.errors?o:o.errors;c.value=o,await i()}},o=async(e,i)=>{const a=new FormData;a.append("Name",e.name),a.append("Image",e.image),a.append("EnglishDescription",e.englishDescription),a.append("EstonianDescription",e.estonianDescription);const o=await fetch(n.value+"firms/"+i,{method:"PUT",body:a}),r=await o.json();if(r){if(200!=o.status)return void 0==r.errors?r:r.errors;c.value=r,await t(""==e.name?i:e.name)}},r=async e=>{const t=await fetch(n.value+"firms/"+e,{method:"DELETE"}),a=await t.json();a&&(m.value=a,await i())};return{firm:m,firms:c,load:i,postFirm:a,getFirm:t,updateFirm:o,deleteFirm:r}}const f=n=>((0,u.dD)("data-v-5305fa72"),n=n(),(0,u.Cn)(),n),v=f((()=>(0,u._)("label",{for:"name"},"Name:",-1))),g=f((()=>(0,u._)("label",{for:"image"},"Image:",-1))),w=["src"],d=["src"],D=f((()=>(0,u._)("label",{for:"englishDescription"},"English description:",-1))),y=f((()=>(0,u._)("label",{for:"estonianDescription"},"Estonian description:",-1))),h=f((()=>(0,u._)("label",{for:"key"},"Key:",-1))),b=f((()=>(0,u._)("button",{type:"submit"},"SALVESTA",-1)));var _=(0,u.aZ)({__name:"FirmForm",props:{firm:null,errors:null},emits:["on-submit"],setup(n,{emit:e}){const i=n,{apiUrl:o}=l();let{load:r}=p();const c=(0,a.iH)({name:i.firm?.name??"",image:i.firm?.image??"",englishDescription:i.firm?.englishDescription??"",estonianDescription:i.firm?.estonianDescription??"",key:""});(0,u.bv)((()=>r()));let m=(0,a.iH)();function f(n){var e=n.target.files||n.dataTransfer.files;e.length&&_(e[0])}function _(n){var e=new FileReader;e.onload=e=>{null!=e.target&&(c.value.image=n,m.value=URL.createObjectURL(n))},e.readAsDataURL(n)}return(r,l)=>((0,u.wg)(),(0,u.iD)("form",{onSubmit:l[5]||(l[5]=(0,t.iM)((n=>e("on-submit",c.value)),["prevent"]))},[v,(0,u.wy)((0,u._)("input",{name:"name","onUpdate:modelValue":l[0]||(l[0]=n=>c.value.name=n),type:"text"},null,512),[[t.nr,c.value.name]]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(n.errors?.Name,(n=>((0,u.wg)(),(0,u.iD)("p",{key:n},(0,s.zw)(n),1)))),128)),g,(0,u._)("input",{name:"image",type:"file",onChange:l[1]||(l[1]=n=>f(n))},null,32),void 0!=(0,a.SU)(m)?((0,u.wg)(),(0,u.iD)("img",{key:0,src:(0,a.SU)(m),alt:"Firms logo"},null,8,w)):void 0!=i.firm?.name?((0,u.wg)(),(0,u.iD)("img",{key:1,src:(0,a.SU)(o)+"firms/"+i.firm?.name+"/image/"+(new Date).toISOString(),alt:"Firms logo"},null,8,d)):(0,u.kq)("",!0),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(n.errors?.Image,(n=>((0,u.wg)(),(0,u.iD)("p",{key:n},(0,s.zw)(n),1)))),128)),D,(0,u.wy)((0,u._)("input",{name:"englishDescription","onUpdate:modelValue":l[2]||(l[2]=n=>c.value.englishDescription=n),type:"text"},null,512),[[t.nr,c.value.englishDescription]]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(n.errors?.EnglishDescription,(n=>((0,u.wg)(),(0,u.iD)("p",{key:n},(0,s.zw)(n),1)))),128)),y,(0,u.wy)((0,u._)("input",{name:"estonianDescription","onUpdate:modelValue":l[3]||(l[3]=n=>c.value.estonianDescription=n),type:"text"},null,512),[[t.nr,c.value.estonianDescription]]),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(n.errors?.EstonianDescription,(n=>((0,u.wg)(),(0,u.iD)("p",{key:n},(0,s.zw)(n),1)))),128)),h,(0,u.wy)((0,u._)("input",{name:"key","onUpdate:modelValue":l[4]||(l[4]=n=>c.value.key=n),type:"text"},null,512),[[t.nr,c.value.key]]),b],32))}}),k=i(89);const U=(0,k.Z)(_,[["__scopeId","data-v-5305fa72"]]);var S=U;const O={key:0},F=["src"],j={key:1},H=(0,u._)("h1",null,"✏️",-1),E={key:2},C=(0,u._)("h1",null,"❌",-1);var T=(0,u.aZ)({__name:"FirmDetails",emits:["on-toggle"],setup(n,{emit:e}){const{apiUrl:i}=l();let{firm:t,load:o,updateFirm:r,deleteFirm:c}=p();(0,u.bv)((()=>o()));let m=(0,a.iH)(!1),f=(0,a.iH)(!1);function v(){m.value=!1,f.value=!1}function g(){m.value=!0,f.value=!1}function w(){m.value=!1,f.value=!0}(0,u.YP)(t,v);let d=(0,a.iH)();async function D(n){d.value=void 0,d.value=await r(n,t.value?.name??""),void 0==d.value&&v()}async function y(){await c(t.value?.name??""),e("on-toggle")}return(n,e)=>(0,a.SU)(m)||(0,a.SU)(f)?(0,a.SU)(m)?((0,u.wg)(),(0,u.iD)("div",j,[H,(0,u.Wm)(S,{onOnSubmit:D,firm:(0,a.SU)(t),errors:(0,a.SU)(d)},null,8,["firm","errors"]),(0,u._)("button",{onClick:v},"👎")])):((0,u.wg)(),(0,u.iD)("div",E,[C,(0,u._)("button",{onClick:y},"👍"),(0,u._)("button",{onClick:v},"👎")])):((0,u.wg)(),(0,u.iD)("div",O,[(0,u._)("img",{src:(0,a.SU)(i)+"firms/"+(0,a.SU)(t)?.name+"/image/"+(new Date).toISOString(),alt:"logo"},null,8,F),(0,u._)("p",null,(0,s.zw)((0,a.SU)(t)?.name)+" "+(0,s.zw)((0,a.SU)(t)?.englishDescription)+" "+(0,s.zw)((0,a.SU)(t)?.estonianDescription),1),(0,u._)("button",{onClick:g},"✏️"),(0,u._)("button",{onClick:w},"❌")]))}});const x=T;var z=x;const I=["onClick"];var Y=(0,u.aZ)({__name:"NavBar",setup(n){let{firms:e}=p();return(n,i)=>((0,u.wg)(),(0,u.iD)("ul",null,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,a.SU)(e),(e=>((0,u.wg)(),(0,u.iD)("li",{key:e,onClick:i=>n.$emit("on-toggle",e)},(0,s.zw)(e),9,I)))),128)),(0,u._)("li",{onClick:i[0]||(i[0]=e=>n.$emit("on-toggle"))},"New firm")]))}});const K=Y;var L=K,N=(0,u.aZ)({__name:"App",setup(n){let{load:e,getFirm:i,postFirm:t}=p();(0,u.bv)((()=>e()));let o=(0,a.iH)(!1);async function r(n){null!=n?(await i(n),o.value=!0):o.value=!1}let l=(0,a.iH)();async function s(n){l.value=void 0,l.value=await t(n),void 0==l.value&&r(n.name)}return(n,e)=>((0,u.wg)(),(0,u.iD)(u.HY,null,[(0,u.Wm)(L,{onOnToggle:r}),(0,a.SU)(o)?((0,u.wg)(),(0,u.j4)(z,{key:0,onOnToggle:r})):((0,u.wg)(),(0,u.j4)(S,{key:1,onOnSubmit:s,errors:(0,a.SU)(l)},null,8,["errors"]))],64))}});const P=N;var A=P;const R=(0,t.ri)(A),V=async()=>{const n=await fetch("/config/runtime-config.json");return await n.json()};V().then((n=>{r(n.API_URL),R.mount("#app")}))}},e={};function i(t){var a=e[t];if(void 0!==a)return a.exports;var o=e[t]={exports:{}};return n[t](o,o.exports,i),o.exports}i.m=n,function(){var n=[];i.O=function(e,t,a,o){if(!t){var r=1/0;for(c=0;c<n.length;c++){t=n[c][0],a=n[c][1],o=n[c][2];for(var l=!0,u=0;u<t.length;u++)(!1&o||r>=o)&&Object.keys(i.O).every((function(n){return i.O[n](t[u])}))?t.splice(u--,1):(l=!1,o<r&&(r=o));if(l){n.splice(c--,1);var s=a();void 0!==s&&(e=s)}}return e}o=o||0;for(var c=n.length;c>0&&n[c-1][2]>o;c--)n[c]=n[c-1];n[c]=[t,a,o]}}(),function(){i.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return i.d(e,{a:e}),e}}(),function(){i.d=function(n,e){for(var t in e)i.o(e,t)&&!i.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){var n={143:0};i.O.j=function(e){return 0===n[e]};var e=function(e,t){var a,o,r=t[0],l=t[1],u=t[2],s=0;if(r.some((function(e){return 0!==n[e]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(u)var c=u(i)}for(e&&e(t);s<r.length;s++)o=r[s],i.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return i.O(c)},t=self["webpackChunkpkui"]=self["webpackChunkpkui"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=i.O(void 0,[998],(function(){return i(45)}));t=i.O(t)})();
//# sourceMappingURL=app.7a5b8afa.js.map