(function(){"use strict";var e={7853:function(e,n,i){var t=i(2549),a=i(8884),o=i(7088),r=i(8254);const l=(0,o.iH)(),u=(0,o.iH)(),s="https://pkapi-production.up.railway.app/api/";function c(){const e=async()=>{const e=await fetch(s+"firms"),n=await e.json();return n||[]},n=async()=>{l.value=await e()},i=async e=>{const n=await fetch(s+"firms/"+e),i=await n.json();i&&(u.value=i)},t=async e=>{const i=new FormData;i.append("Name",e.name),i.append("Image",e.image),i.append("EnglishDescription",e.englishDescription),i.append("EstonianDescription",e.estonianDescription);const t=await fetch(s+"firms",{method:"POST",body:i}),a=await t.json();if(a){if(200!=t.status)return void 0==a.errors?a:a.errors;l.value=a,await n()}},a=async(e,n)=>{const t=new FormData;t.append("Name",e.name),t.append("Image",e.image),t.append("EnglishDescription",e.englishDescription),t.append("EstonianDescription",e.estonianDescription);const a=await fetch(s+"firms/"+n,{method:"PUT",body:t}),o=await a.json();if(o){if(200!=a.status)return void 0==o.errors?o:o.errors;l.value=o,await i(""==e.name?n:e.name)}},o=async e=>{const i=await fetch(s+"firms/"+e,{method:"DELETE"}),t=await i.json();t&&(u.value=t,await n())};return{urlApi:s,firm:u,firms:l,load:n,postFirm:t,getFirm:i,updateFirm:a,deleteFirm:o}}const m=e=>((0,a.dD)("data-v-e892a1e4"),e=e(),(0,a.Cn)(),e),p=m((()=>(0,a._)("label",{for:"name"},"Name:",-1))),f=m((()=>(0,a._)("label",{for:"image"},"Image:",-1))),g=["src"],v=["src"],w=m((()=>(0,a._)("label",{for:"englishDescription"},"English description:",-1))),d=m((()=>(0,a._)("label",{for:"estonianDescription"},"Estonian description:",-1))),D=m((()=>(0,a._)("label",{for:"key"},"Key:",-1))),y=m((()=>(0,a._)("button",{type:"submit"},"SALVESTA",-1)));var h=(0,a.aZ)({__name:"FirmForm",props:{firm:null,errors:null},emits:["on-submit"],setup(e,{emit:n}){const i=e;let{urlApi:l,load:u}=c();const s=(0,o.iH)({name:i.firm?.name??"",image:i.firm?.image??"",englishDescription:i.firm?.englishDescription??"",estonianDescription:i.firm?.estonianDescription??"",key:""});(0,a.bv)((()=>u()));let m=(0,o.iH)();function h(e){var n=e.target.files||e.dataTransfer.files;n.length&&b(n[0])}function b(e){var n=new FileReader;n.onload=n=>{null!=n.target&&(s.value.image=e,m.value=URL.createObjectURL(e))},n.readAsDataURL(e)}return(u,c)=>((0,a.wg)(),(0,a.iD)("form",{onSubmit:c[5]||(c[5]=(0,t.iM)((e=>n("on-submit",s.value)),["prevent"]))},[p,(0,a.wy)((0,a._)("input",{name:"name","onUpdate:modelValue":c[0]||(c[0]=e=>s.value.name=e),type:"text"},null,512),[[t.nr,s.value.name]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.errors?.Name,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e},(0,r.zw)(e),1)))),128)),f,(0,a._)("input",{name:"image",type:"file",onChange:c[1]||(c[1]=e=>h(e))},null,32),void 0!=(0,o.SU)(m)?((0,a.wg)(),(0,a.iD)("img",{key:0,src:(0,o.SU)(m),alt:"Firms logo"},null,8,g)):void 0!=i.firm?.name?((0,a.wg)(),(0,a.iD)("img",{key:1,src:(0,o.SU)(l)+"firms/"+i.firm?.name+"/image/"+(new Date).toISOString(),alt:"Firms logo"},null,8,v)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.errors?.Image,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e},(0,r.zw)(e),1)))),128)),w,(0,a.wy)((0,a._)("input",{name:"englishDescription","onUpdate:modelValue":c[2]||(c[2]=e=>s.value.englishDescription=e),type:"text"},null,512),[[t.nr,s.value.englishDescription]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.errors?.EnglishDescription,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e},(0,r.zw)(e),1)))),128)),d,(0,a.wy)((0,a._)("input",{name:"estonianDescription","onUpdate:modelValue":c[3]||(c[3]=e=>s.value.estonianDescription=e),type:"text"},null,512),[[t.nr,s.value.estonianDescription]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.errors?.EstonianDescription,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e},(0,r.zw)(e),1)))),128)),D,(0,a.wy)((0,a._)("input",{name:"key","onUpdate:modelValue":c[4]||(c[4]=e=>s.value.key=e),type:"text"},null,512),[[t.nr,s.value.key]]),y],32))}}),b=i(89);const k=(0,b.Z)(h,[["__scopeId","data-v-e892a1e4"]]);var _=k;const S={key:0},U=["src"],O={key:1},F=(0,a._)("h1",null,"✏️",-1),H={key:2},j=(0,a._)("h1",null,"❌",-1);var E=(0,a.aZ)({__name:"FirmDetails",emits:["on-toggle"],setup(e,{emit:n}){let{urlApi:i,firm:t,load:l,updateFirm:u,deleteFirm:s}=c();(0,a.bv)((()=>l()));let m=(0,o.iH)(!1),p=(0,o.iH)(!1);function f(){m.value=!1,p.value=!1}function g(){m.value=!0,p.value=!1}function v(){m.value=!1,p.value=!0}(0,a.YP)(t,f);let w=(0,o.iH)();async function d(e){w.value=void 0,w.value=await u(e,t.value?.name??""),void 0==w.value&&f()}async function D(){await s(t.value?.name??""),n("on-toggle")}return(e,n)=>(0,o.SU)(m)||(0,o.SU)(p)?(0,o.SU)(m)?((0,a.wg)(),(0,a.iD)("div",O,[F,(0,a.Wm)(_,{onOnSubmit:d,firm:(0,o.SU)(t),errors:(0,o.SU)(w)},null,8,["firm","errors"]),(0,a._)("button",{onClick:f},"👎")])):((0,a.wg)(),(0,a.iD)("div",H,[j,(0,a._)("button",{onClick:D},"👍"),(0,a._)("button",{onClick:f},"👎")])):((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("img",{src:(0,o.SU)(i)+"firms/"+(0,o.SU)(t)?.name+"/image/"+(new Date).toISOString(),alt:"logo"},null,8,U),(0,a._)("p",null,(0,r.zw)((0,o.SU)(t)?.name)+" "+(0,r.zw)((0,o.SU)(t)?.englishDescription)+" "+(0,r.zw)((0,o.SU)(t)?.estonianDescription),1),(0,a._)("button",{onClick:g},"✏️"),(0,a._)("button",{onClick:v},"❌")]))}});const C=E;var T=C;const x=["onClick"];var z=(0,a.aZ)({__name:"NavBar",setup(e){let{firms:n}=c();return(e,i)=>((0,a.wg)(),(0,a.iD)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),(n=>((0,a.wg)(),(0,a.iD)("li",{key:n,onClick:i=>e.$emit("on-toggle",n)},(0,r.zw)(n),9,x)))),128)),(0,a._)("li",{onClick:i[0]||(i[0]=n=>e.$emit("on-toggle"))},"New firm")]))}});const A=z;var I=A,Y=(0,a.aZ)({__name:"App",setup(e){let{load:n,getFirm:i,postFirm:t}=c();(0,a.bv)((()=>n()));let r=(0,o.iH)(!1);async function l(e){null!=e?(await i(e),r.value=!0):r.value=!1}let u=(0,o.iH)();async function s(e){u.value=void 0,u.value=await t(e),void 0==u.value&&l(e.name)}return(e,n)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{onOnToggle:l}),(0,o.SU)(r)?((0,a.wg)(),(0,a.j4)(T,{key:0,onOnToggle:l})):((0,a.wg)(),(0,a.j4)(_,{key:1,onOnSubmit:s,errors:(0,o.SU)(u)},null,8,["errors"]))],64))}});const K=Y;var N=K;(0,t.ri)(N).mount("#app")}},n={};function i(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(n,t,a,o){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],a=e[c][1],o=e[c][2];for(var l=!0,u=0;u<t.length;u++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](t[u])}))?t.splice(u--,1):(l=!1,o<r&&(r=o));if(l){e.splice(c--,1);var s=a();void 0!==s&&(n=s)}}return n}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[t,a,o]}}(),function(){i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,{a:n}),n}}(),function(){i.d=function(e,n){for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};i.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,o,r=t[0],l=t[1],u=t[2],s=0;if(r.some((function(n){return 0!==e[n]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(u)var c=u(i)}for(n&&n(t);s<r.length;s++)o=r[s],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},t=self["webpackChunkpkui"]=self["webpackChunkpkui"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=i.O(void 0,[998],(function(){return i(7853)}));t=i.O(t)})();
//# sourceMappingURL=app.f66a02d8.js.map